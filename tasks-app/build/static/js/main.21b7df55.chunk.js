(this["webpackJsonptasks-app"]=this["webpackJsonptasks-app"]||[]).push([[0],{11:function(e,t,n){e.exports={errors:n(53),validators:n(54),polyfills:n(120),validate:n(122)}},110:function(e,t,n){var r=n(27),a=n(28),s=n(19),o=n(18),c=n(29),i=n(30);e.exports=function(e){"use strict";function t(e){var n;return r(this,t),n=a(this,s(t).call(this,e)),Error.captureStackTrace(o(n),t),n.name=t.name,n}return c(t,e),t}(i(Error))},114:function(e,t,n){var r=n(27),a=n(28),s=n(19),o=n(18),c=n(29),i=n(30);e.exports=function(e){"use strict";function t(e){var n;return r(this,t),n=a(this,s(t).call(this,e)),Error.captureStackTrace(o(n),t),n.name=t.name,n}return c(t,e),t}(i(Error))},115:function(e,t,n){var r=n(27),a=n(28),s=n(19),o=n(18),c=n(29),i=n(30);e.exports=function(e){"use strict";function t(e){var n;return r(this,t),n=a(this,s(t).call(this,e)),Error.captureStackTrace(o(n),t),n.name=t.name,n}return c(t,e),t}(i(Error))},116:function(e,t,n){var r=n(27),a=n(28),s=n(19),o=n(18),c=n(29),i=n(30);e.exports=function(e){"use strict";function t(e){var n;return r(this,t),n=a(this,s(t).call(this,e)),Error.captureStackTrace(o(n),t),n.name=t.name,n}return c(t,e),t}(i(Error))},117:function(e,t){e.exports=function(e,t){return typeof e===t}},118:function(e,t){e.exports=function(e,t){return e instanceof t}},119:function(e,t){var n=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;e.exports=function(e){return n.test(e)}},120:function(e,t,n){e.exports={arrayRandom:n(121)}},121:function(e,t){e.exports=function(){"function"!==typeof Array.prototype.random&&(Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]})}},122:function(e,t,n){var r=n(53).ContentError,a=n(54),s=a.isTypeOf,o=a.isInstanceOf,c=a.isEmail,i={typeOf:function(e,t){if(!s(t,e))throw new TypeError("".concat(t," is not a ").concat(e))},string:function(e){this.typeOf("string",e)},function:function(e){this.typeOf("function",e)},number:function(e){this.typeOf("number",e)},boolean:function(e){this.typeOf("boolean",e)},instanceOf:function(e,t){if(!o(t,e))throw TypeError("".concat(t," is not a ").concat(e.name))},array:function(e){this.instanceOf(Array,e)},email:function(e){if(!c(String(e).toLowerCase()))throw new r("".concat(e," is not an e-mail"))},matches:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(!a.includes(t))throw new r("".concat(t," does not match any of the valid ").concat(e," values: ").concat(a))}};i.string.notVoid=function(e,t){if(!t.trim().length)throw new r("".concat(e," is empty or blank"))},e.exports=i},124:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(16),o=n.n(s),c=n(1),i=n.n(c),u=n(3),l=n(12),p=(n(67),n(68),n(69),function(e){var t=e.message;return a.a.createElement("p",{className:"feedback__message feedback__inDetail"},t)}),f=function(e){var t=e.onRegister,n=e.onBack,r=e.error;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"login-title"},a.a.createElement("h1",null,"Kanban")),a.a.createElement("section",{className:"register"},a.a.createElement("h2",{className:"register__title"},"Please, introduce your details"),a.a.createElement("form",{className:"register__form",onSubmit:function(e){e.preventDefault();var n=e.target,r=n.name.value,a=n.surname.value,s=n.email.value,o=n.username.value,c=n.password.value;t(r,a,s,o,c)}},a.a.createElement("input",{className:"form__input",type:"text",name:"name",placeholder:"name"}),a.a.createElement("input",{className:"form__input",type:"text",name:"surname",placeholder:"surname"}),a.a.createElement("input",{className:"form__input",type:"text",name:"email",placeholder:"email"}),a.a.createElement("input",{className:"form__input",type:"username",name:"username",placeholder:"username"}),a.a.createElement("input",{className:"form__input",type:"password",name:"password",placeholder:"password"}),a.a.createElement("button",{className:"form__button form__button--register"},"Create account"),a.a.createElement("button",{type:"button",className:"form__button form__button--register-back",onClick:function(e){e.preventDefault(),n()}},"Go back")),r&&a.a.createElement(p,{message:r})))},m=(n(70),function(e){var t=e.onRegister,n=e.onLogin,r=(e.onBack,e.error);return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"login-title"},a.a.createElement("h1",null,"Kanban")),a.a.createElement("section",{className:"landing"},a.a.createElement("h2",{className:"landing__title"},"Login to enter"),a.a.createElement("form",{className:"landing__form",onSubmit:function(e){e.preventDefault();var t=e.target,r=t.username.value,a=t.password.value;n(r,a)}},a.a.createElement("input",{className:"form__input",type:"text",name:"username",placeholder:"email"}),a.a.createElement("input",{className:"form__input",type:"password",name:"password",placeholder:"password"}),a.a.createElement("button",{type:"submit",className:"form__button form__button--login"},"Login"),a.a.createElement("button",{type:"button",className:"form__button form__button--register"},a.a.createElement("a",{href:"",onClick:function(e){e.preventDefault(),t()}},"Create account"))),r&&a.a.createElement(p,{message:r})))}),d=n(60),h=n(17),b=(n(71),function(e){var t=e.status,n=e.title,r=e.modifier,s=e.index,o=e.id,c=e.onDeleteTask;return a.a.createElement(a.a.Fragment,null,a.a.createElement(h.b,{draggableId:o,index:s},(function(e){return a.a.createElement("li",Object.assign({className:"task task--doing"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),a.a.createElement("h3",{className:"task__title task__title--".concat(r)},n),a.a.createElement("i",{className:"fas fa-times",onClick:function(){c(o,t)}}))})))}),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.method,r=void 0===n?"GET":n,a=t.headers,s=t.body;return new Promise((function(t,n){try{var o=new XMLHttpRequest;if(o.open(r,e),o.onreadystatechange=function(){if(4===this.readyState)if(0===this.status)n(new Error("fail to call ".concat(e)));else{var r={status:this.status,body:this.responseText};t(r)}},a)for(var c in a)o.setRequestHeader(c,a[c]);s?o.send(s):o.send()}catch(i){n(i)}}))},g=n(11),w=g.validate,E=g.errors.CredentialsError,x=n(11),y=x.validate,v=x.errors.ConflictError,O=n(11),N=O.validate,_=O.errors.NotFoundError,S=n(11),j=S.validate,J=S.errors,C=J.NotFoundError,T=J.CredentialsError,V=n(11),I=V.validate,A=V.errors,B=A.CredentialsError,F=A.NotFoundError,L=A.ConflictError,D=n(11),R=D.validate,P=D.errors,z=P.CredentialsError,G=P.NotFoundError,H=P.ConflictError,K=n(11),M=K.validate,q=K.errors,W=q.NotFoundError,Z=q.CredentialsError,$=n(11),U=$.validate,X=$.errors,Q=X.CredentialsError,Y=X.NotFoundError,ee=X.ConflictError,te=function(e,t){return w.string(e),w.string.notVoid("username",e),w.string(t),w.string.notVoid("password",t),Object(u.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/users/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});case 2:if(200!==(r=n.sent).status){n.next=5;break}return n.abrupt("return",JSON.parse(r.body).token);case 5:if(401!==r.status){n.next=7;break}throw new E(JSON.parse(r.body).message);case 7:throw new Error(JSON.parse(r.body).message);case 8:case"end":return n.stop()}}),n)})))()},ne=function(e,t,n,r,a){return y.string(e),y.string.notVoid("name",e),y.string(t),y.string.notVoid("surname",t),y.string(n),y.string.notVoid("e-mail",n),y.email(n),y.string(r),y.string.notVoid("username",r),y.string(a),y.string.notVoid("password",a),Object(u.a)(i.a.mark((function s(){var o;return i.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,k("".concat("https://kanban-api-1.herokuapp.com","/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,surname:t,email:n,username:r,password:a})});case 3:if(201!==(o=s.sent).status){s.next=6;break}return s.abrupt("return");case 6:if(409!==o.status){s.next=8;break}throw new v(JSON.parse(o.body).message);case 8:throw new Error(JSON.parse(o.body).message);case 9:case"end":return s.stop()}}),s)})))()},re=function(e){return N.string(e),N.string.notVoid("token",e),Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/users"),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});case 2:if(200!==(n=t.sent).status){t.next=5;break}return t.abrupt("return",JSON.parse(n.body).user);case 5:if(404!==n.status){t.next=7;break}throw new _(JSON.parse(n.body).message);case 7:throw new Error(JSON.parse(n.body).message);case 8:case"end":return t.stop()}}),t)})))()},ae=function(e){return R.string(e),R.string.notVoid("token",e),Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/columns"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 2:if(200!==(n=t.sent).status){t.next=5;break}return t.abrupt("return");case 5:if(401!==n.status){t.next=7;break}throw new z(JSON.parse(n.body).message);case 7:if(404!==n.status){t.next=9;break}throw new G(JSON.parse(n.body).message);case 9:if(409!==n.status){t.next=11;break}throw new H(JSON.parse(n.body).message);case 11:case"end":return t.stop()}}),t)})))()},se=function(e,t,n){return I.string(e),I.string.notVoid("token",e),I.string(t),I.string.notVoid("status",t),I.string(n),I.string.notVoid("title",n),Object(u.a)(i.a.mark((function r(){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/tasks"),{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({status:t,title:n})});case 2:if(200!==(a=r.sent).status){r.next=5;break}return r.abrupt("return",JSON.parse(a.body).task);case 5:if(401!==a.status){r.next=7;break}throw new B(JSON.parse(a.body).message);case 7:if(404!==a.status){r.next=9;break}throw new F(JSON.parse(a.body).message);case 9:if(409!==a.status){r.next=11;break}throw new L(JSON.parse(a.body).message);case 11:case"end":return r.stop()}}),r)})))()},oe=function(e){var t=e.status,n=e.index,s=e.tasks,o=e.onCreateNewTask,c=e.onDeleteTask,p=t.toLowerCase(),f=sessionStorage.token,m=Object(r.useState)(!1),d=Object(l.a)(m,2),k=d[0],g=d[1],w=Object(r.useState)(null),E=Object(l.a)(w,2),x=E[0],y=E[1];function v(){return(v=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,y(n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){y(null)}),[k]);var O=Object(r.useRef)(null);return function(e){function n(e){return a.apply(this,arguments)}function a(){return(a=Object(u.a)(i.a.mark((function n(r){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.current||e.current.contains(r.target)){n.next=9;break}if(!x&&g(!1),!x){n.next=7;break}return n.next=5,se(f,t,x);case 5:a=n.sent,o(a,t);case 7:g(!1),y(null);case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}Object(r.useEffect)((function(){return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}))}(O),a.a.createElement(a.a.Fragment,null,a.a.createElement("li",{className:"tasks__column tasks__column-".concat(p)},a.a.createElement("h2",{className:"tasks__title"},t),a.a.createElement("ul",{className:"tasks__task"},a.a.createElement("li",{className:"task task__add task__add--".concat(p),onClick:function(){g(!0)}},a.a.createElement("h3",{className:"task__title"},"+ Add new card")),k&&a.a.createElement("li",{className:"task task--".concat(p)},a.a.createElement("input",{type:"text",className:"task__title task__title--".concat(p," task__new"),placeholder:"Enter a title for this card",onChange:function(e){return v.apply(this,arguments)},ref:O})),a.a.createElement(h.c,{droppableId:t,index:n},(function(e){return a.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),s&&s.map((function(e,n){return a.a.createElement(b,{status:t,key:e._id,title:e.title,modifier:p,index:n,id:e._id,onDeleteTask:c})})),e.placeholder)})))))},ce=function(e){return j.string(e),j.string.notVoid("token",e),Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/columns"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 2:if(200!==(n=t.sent).status){t.next=5;break}return t.abrupt("return",JSON.parse(n.body).columns);case 5:if(401!==n.status){t.next=7;break}throw new T(JSON.parse(n.body).message);case 7:if(404!==n.status){t.next=9;break}throw new C(JSON.parse(n.body).message);case 9:throw new Error(JSON.parse(n.body).message);case 10:case"end":return t.stop()}}),t)})))()},ie=function(e,t){return M.string(e),M.string.notVoid("token",e),Object(u.a)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/columns"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({column:t})});case 2:if(201!==(r=n.sent).status){n.next=5;break}return n.abrupt("return");case 5:if(401!==r.status){n.next=7;break}throw new Z(JSON.parse(r.body).message);case 7:if(404!==r.status){n.next=9;break}throw new W(JSON.parse(r.body).message);case 9:throw new Error(JSON.parse(r.body).message);case 10:case"end":return n.stop()}}),n)})))()},ue=ae,le=function(e,t,n){return U.string(e),U.string.notVoid("token",e),U.string(t),U.string.notVoid("task id",t),U.string(n),U.string.notVoid("status",n),Object(u.a)(i.a.mark((function r(){var a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k("".concat("https://kanban-api-1.herokuapp.com","/tasks/").concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({status:n})});case 2:if(201!==(a=r.sent).status){r.next=5;break}return r.abrupt("return");case 5:if(401!==a.status){r.next=7;break}throw new Q(JSON.parse(a.body).message);case 7:if(404!==a.status){r.next=9;break}throw new Y(JSON.parse(a.body).message);case 9:if(409!==a.status){r.next=11;break}throw new ee(JSON.parse(a.body).message);case 11:throw new Error(JSON.parse(a.body).message);case 12:case"end":return r.stop()}}),r)})))()},pe=function(e){e.user,e.onLogout;var t=sessionStorage.token,n=Object(r.useState)(),s=Object(l.a)(n,2),o=s[0],c=s[1],p=Object(r.useState)(!1),f=Object(l.a)(p,2),m=f[0],b=f[1];function k(){return(k=Object(u.a)(i.a.mark((function e(n){var r,a,s,u,l,p,f,m,h,k,g,w,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.destination,a=n.source,n.draggableId,b(!1),r){e.next=4;break}return e.abrupt("return");case 4:if(r.droppableId!==a.droppableId||r.index!==a.index){e.next=6;break}return e.abrupt("return");case 6:if(s=o.filter((function(e){return e.status===a.droppableId})),u=o.filter((function(e){return e.status===r.droppableId})),l=Object(d.a)(o),s[0].id!==u[0].id){e.next=20;break}return p=o.findIndex((function(e){return e.status===a.droppableId})),f=Array.from(s[0].tasks),m=f.splice(a.index,1),f.splice(r.index,0,m[0]),l[p].tasks=f,c(l),e.next=18,ie(t,l[p]);case 18:return b(!0),e.abrupt("return");case 20:return h=o.findIndex((function(e){return e.status===a.droppableId})),k=Array.from(s[0].tasks),g=k.splice(a.index,1),w=o.findIndex((function(e){return e.status===r.droppableId})),(E=Array.from(u[0].tasks)).splice(r.index,0,g[0]),l[h].tasks=k,l[w].tasks=E,c(l),e.next=31,ie(t,l[h]);case 31:return e.next=33,ie(t,l[w]);case 33:b(!0);case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){var n=o.findIndex((function(e){return e.status===t}));o[n].tasks.push(e),c(o)}function w(e,t){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(i.a.mark((function e(n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(t,n,r);case 3:b(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ue(t);case 3:return e.next=5,ce(t);case 5:n=e.sent,c(n),b(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),r=e.t0.message,console.log(r);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}),[m]),a.a.createElement(a.a.Fragment,null,a.a.createElement("header",null,a.a.createElement("h1",null,"Kanban")),a.a.createElement("main",null,a.a.createElement(h.a,{onDragEnd:function(e){return k.apply(this,arguments)}},a.a.createElement("ul",{className:"tasks"},o&&o.map((function(e,t){return a.a.createElement(oe,{key:e.status,status:e.status,index:t,tasks:e.tasks,onCreateNewTask:g,onDeleteTask:w})}))))))},fe=n(13),me=te,de=ne,he=re,be=Object(fe.e)((function(e){var t=e.history,n=Object(r.useState)(),s=Object(l.a)(n,2),o=s[0],c=s[1];function p(){t.push("/register")}function d(e,t,n,r,a){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(i.a.mark((function e(n,r,a,s,o){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,de(n,r,a,s,o);case 3:t.push("/login"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function b(e,t){return k.apply(this,arguments)}function k(){return(k=Object(u.a)(i.a.mark((function e(n,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(n,r);case 3:a=e.sent,sessionStorage.token=a,t.push("/tasks"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(){t.push("/")}function w(){sessionStorage.clear(),g()}return Object(r.useEffect)((function(){var e=sessionStorage.token;Object(u.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,he(e);case 3:n=t.sent,r=n.name,c(r);case 6:case"end":return t.stop()}}),t)})))()}),[sessionStorage.token]),a.a.createElement(a.a.Fragment,null,a.a.createElement(fe.a,{exact:!0,path:"/",render:function(){return a.a.createElement(m,{onLogin:b,onBack:g,onRegister:p})}}),a.a.createElement(fe.a,{path:"/login",render:function(){return a.a.createElement(m,{onLogin:b,onBack:g,onRegister:p})}}),a.a.createElement(fe.a,{path:"/register",render:function(){return a.a.createElement(f,{onRegister:d,onBack:g})}}),a.a.createElement(fe.a,{path:"/tasks",render:function(){return a.a.createElement(pe,{user:o,onLogout:w})}}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=n(36);o.a.render(a.a.createElement(ke.a,null,a.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},53:function(e,t,n){e.exports={ConflictError:n(110),ContentError:n(114),CredentialsError:n(115),NotFoundError:n(116)}},54:function(e,t,n){e.exports={isTypeOf:n(117),isInstanceOf:n(118),isEmail:n(119)}},61:function(e,t,n){e.exports=n(124)},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.21b7df55.chunk.js.map